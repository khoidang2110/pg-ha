global
    maxconn 100

defaults
    mode tcp
    timeout connect 10s
    timeout client 30s
    timeout server 30s

frontend postgres
    bind *:5432
    default_backend postgres_backend

backend postgres_backend
    server postgres1 postgres1:5432 check
    server postgres2 postgres2:5432 check

frontend patroni_api
    bind *:5000
    mode http
    default_backend patroni_api_backend

backend patroni_api_backend
    mode http
    server postgres1 postgres1:8008 check
    server postgres2 postgres2:8008 check
